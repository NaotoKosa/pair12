<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja" >
<head>
<meta charset="UTF-8">
<title>SWAROID</title>
<link rel="stylesheet" type="text/css" href="/style.css">
<link rel="stylesheet" type="text/css" href="/tag.css">
<script>
function f(code){
	var result = confirm("キャンセルを確定しますか？");
	if(result == true){
		var form = document.querySelector("#form" + code);
		form.submit();
	}
}


</script>
<style>
#myTable .tablesorter-header.sort {
	cursor: pointer;
	outline: none;
}
#myTable .tablesorter-header.sort .tablesorter-header-inner::after {
	content: '▼';
	font-size: 12px;
	margin-left: 5px;
}

</style>
</head>
<body>
<span><input th:replace="../static/reserveTag.html"></span>
	<br>
	<br>
	<br>
	<br>
	<h2>予約一覧</h2>
	<span th:text="${ERROR}" style="color:red"></span>
	<table border="0" class="table tablesorter" id="myTable">
		<thead>
			<tr>
				<th class="sort">予約番号</th>
				<th class="sort">登録日</th>
				<th class="sort">会議室</th>
				<th class="no-sort">座席</th>
				<th class="sort">予約日</th>
				<th class="no-sort">開始時間</th>
				<th class="no-sort">終了時間</th>
				<th class="no-sort"></th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="list:${reserveList}">
			<form action="/cancel" method="get" th:id="'form' + ${list.code}">
				<td th:text="${list.code}"></td>
				<td th:text="${list.ymd}"></td>
				<td th:text="${list.room}"></td>
				<td th:text="${list.seat}"></td>
				<td th:text="${list.date}"></td>
				<td th:text="${list.start}"></td>
				<td th:text="${list.finish}"></td>
				<td>
				<input type="hidden" name="list.code" th:value="${list.code}">
				<input type="hidden" name="list.date" th:value="${list.date}">
				<input type="hidden" name="list.start" th:value="${list.start}">
				<input type="hidden" name="list.finish" th:value="${list.finish}">
				<input type="button" th:value="キャンセル" th:attr="onclick='f(' + ${list.code} + ')'" th:disabled="${todaysDate > list.date || todaysDate == list.date && n > list.finish}">
				</td>
			</form>
			</tr>
		</tbody>
	</table>
<br>
<a href="/main">メイン画面</a>
<script
  src="https://code.jquery.com/jquery-3.6.0.js"
  integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.1/js/jquery.tablesorter.min.js"></script>
<script>
$(document).ready(function(){
	$("#myTable").tablesorter({
		headers: {
			3: { sorter: false },
			5: { sorter: false },
			6: { sorter: false },
			7: { sorter: false }
		}
	});
});
</script>
</body>
</html>